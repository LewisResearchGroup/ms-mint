<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Wecome to ms-mint &mdash; ms-mint 0.1.6 documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
    <link rel="canonical" href="https://lewisresearchgroup.github.io/ms-mint/readme.html" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="_static/jquery.js"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/sphinx_highlight.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="ms_mint" href="modules.html" />
    <link rel="prev" title="Welcome to ms-mint’s documentation!" href="index.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            ms-mint
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Wecome to ms-mint</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#a-python-library-for-targeted-metabolomics">A Python library for targeted metabolomics</a></li>
<li class="toctree-l2"><a class="reference internal" href="#documentation">Documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="#ms-mint-application-with-graphical-user-iterface-gui">ms-mint application with graphical user iterface (GUI)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#publications-that-used-ms-mint">Publications that used ms-mint</a></li>
<li class="toctree-l2"><a class="reference internal" href="#contributions">Contributions</a></li>
<li class="toctree-l2"><a class="reference internal" href="#code-standards">Code standards</a></li>
<li class="toctree-l2"><a class="reference internal" href="#usage">Usage</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#ms-mint-in-jupyterlab-or-the-jupyter-notebook">ms-mint in JupyterLab, or the Jupyter Notebook</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#data-extraction">Data extraction</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#load-files">Load files</a></li>
<li class="toctree-l3"><a class="reference internal" href="#load-target-list">Load target list</a></li>
<li class="toctree-l3"><a class="reference internal" href="#run-data-extraction">Run data extraction</a></li>
<li class="toctree-l3"><a class="reference internal" href="#processing-a-large-number-of-files">Processing a large number of files</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#optimize-retention-times">Optimize retention times</a></li>
<li class="toctree-l2"><a class="reference internal" href="#plotting-and-data-exploration">Plotting and data exploration</a></li>
<li class="toctree-l2"><a class="reference internal" href="#plot-peak-shapes">Plot peak shapes</a></li>
<li class="toctree-l2"><a class="reference internal" href="#hierarchical-clustering">Hierarchical clustering</a></li>
<li class="toctree-l2"><a class="reference internal" href="#principal-components-analysis">Principal Components Analysis</a></li>
<li class="toctree-l2"><a class="reference internal" href="#faq">FAQ</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#what-is-a-target-list">What is a target list</a></li>
<li class="toctree-l3"><a class="reference internal" href="#what-input-files-can-be-used">What input files can be used</a></li>
<li class="toctree-l3"><a class="reference internal" href="#which-properties-does-ms-mint-extract">Which properties does ms-mint extract</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#parameters-from-target-list">Parameters from target list</a></li>
<li class="toctree-l4"><a class="reference internal" href="#results-columns">Results columns</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#release-notes">Release Notes</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#milestones">0.2.0 Milestones</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="modules.html">ms_mint</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">ms-mint</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Wecome to ms-mint</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/readme.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <p><a class="reference external" href="https://github.com/LewisResearchGroup/ms-mint/actions/workflows/pythonpackage.yml"><img alt="Python package" src="https://github.com/LewisResearchGroup/ms-mint/actions/workflows/pythonpackage.yml/badge.svg" /></a>
<img alt="" src="https://github.com/LewisResearchGroup/ms-mint/blob/develop/images/coverage.svg" />
<a class="reference external" href="https://github.com/lewisresearchgroup/ms-mint/actions/workflows/codeql-analysis.yml"><img alt="CodeQL" src="https://github.com/lewisresearchgroup/ms-mint/actions/workflows/codeql-analysis.yml/badge.svg" /></a></p>
<section id="wecome-to-ms-mint">
<h1>Wecome to ms-mint<a class="headerlink" href="#wecome-to-ms-mint" title="Permalink to this heading"></a></h1>
<section id="a-python-library-for-targeted-metabolomics">
<h2>A Python library for targeted metabolomics<a class="headerlink" href="#a-python-library-for-targeted-metabolomics" title="Permalink to this heading"></a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">ms-mint</span></code> library is a tool designed to assist with targeted metabolomics studies, which involves the systematic analysis of small chemical compounds called metabolites that are present in biological samples. These metabolites can provide valuable information about the state of an organism, including indicators of disease or other physiological changes. In order to perform a targeted metabolomics study, researchers typically use liquid chromatography-mass spectrometry (LCMS) to identify and quantify specific metabolites of interest.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">ms-mint</span></code> library includes a range of functions for processing LCMS data from targeted metabolomics experiments, and it is particularly well-suited for handling large amounts of data (10,000+ files). To use <code class="docutils literal notranslate"><span class="pre">ms-mint</span></code>, you provide it with a target list of the specific metabolites you want to analyze, as well as the names of the mass spectrometry files containing the data. ms-mint then extracts peak intensities and other relevant information from the data, allowing you to gain insights into the concentrations and profiles of the metabolites in your samples. This information can be used to identify biomarkers, which are indicators of disease or other physiological changes that can be used in the development of diagnostic tests or other medical applications.</p>
</section>
<section id="documentation">
<h2>Documentation<a class="headerlink" href="#documentation" title="Permalink to this heading"></a></h2>
<p>The code documentation can be accessed <a class="reference external" href="https://lewisresearchgroup.github.io/ms-mint/readme.html">here</a>.</p>
</section>
<section id="ms-mint-application-with-graphical-user-iterface-gui">
<h2>ms-mint application with graphical user iterface (GUI)<a class="headerlink" href="#ms-mint-application-with-graphical-user-iterface-gui" title="Permalink to this heading"></a></h2>
<p>MINT has been split into the Python library and the app. This repository contains the Python library. For the app follow <a class="reference external" href="https://github.com/LewisResearchGroup/ms-mint-app">this link</a>.</p>
</section>
<section id="publications-that-used-ms-mint">
<h2>Publications that used ms-mint<a class="headerlink" href="#publications-that-used-ms-mint" title="Permalink to this heading"></a></h2>
<ol class="arabic simple">
<li><p>Brown K, Thomson CA, Wacker S, Drikic M, Groves R, Fan V, et al. <a class="reference external" href="https://pubmed.ncbi.nlm.nih.gov/36906623/">Microbiota alters the metabolome in an age- and sex- dependent manner in mice.</a> Nat Commun. 2023;14: 1348.</p></li>
</ol>
</section>
<hr class="docutils" />
<section id="contributions">
<h2>Contributions<a class="headerlink" href="#contributions" title="Permalink to this heading"></a></h2>
<p>All contributions, bug reports, code reviews, bug fixes, documentation improvements, enhancements, and ideas are welcome.
Before you modify the code please reach out to us using the <a class="reference external" href="https://github.com/LewisResearchGroup/ms-mint/issues">issues</a> page.</p>
</section>
<section id="code-standards">
<h2>Code standards<a class="headerlink" href="#code-standards" title="Permalink to this heading"></a></h2>
<p>The project follows PEP8 standard and uses Black and Flake8 to ensure a consistent code format throughout the project.</p>
</section>
<section id="usage">
<h2>Usage<a class="headerlink" href="#usage" title="Permalink to this heading"></a></h2>
<p>To use the main class of the ms-mint library, you can import it into your code with the following command:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>from ms_mint.Mint import Mint
</pre></div>
</div>
<p>This will import a lightweight version of the class with the essential functionality. If you want to use the ms-mint tool interactively in a Jupyter Notebook or JupyterLab, you can import the class with the following command:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>from ms_mint.notebook import Mint
</pre></div>
</div>
<p>This version of the class is designed specifically for use in Jupyter notebooks and includes additional functions. Once you have imported the appropriate version of the class, you can create an instance of the Mint class and use its methods to process your data.</p>
<section id="ms-mint-in-jupyterlab-or-the-jupyter-notebook">
<h3>ms-mint in JupyterLab, or the Jupyter Notebook<a class="headerlink" href="#ms-mint-in-jupyterlab-or-the-jupyter-notebook" title="Permalink to this heading"></a></h3>
<p>In the JupyterLab you would first instantiate the main class and then load a number of mass-spectrometry (MS) files and a target list.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>%pylab inline
from ms_mint.notebook import Mint
mint = Mint()
</pre></div>
</div>
</section>
</section>
<section id="data-extraction">
<h2>Data extraction<a class="headerlink" href="#data-extraction" title="Permalink to this heading"></a></h2>
<section id="load-files">
<h3>Load files<a class="headerlink" href="#load-files" title="Permalink to this heading"></a></h3>
<p>You can import files simply by assigning a list to the <code class="docutils literal notranslate"><span class="pre">Mint.ms_files</span></code> attribute.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>mint.ms_files = [
    &#39;./input/EC_B2.mzXML&#39;,
    &#39;./input/EC_B1.mzXML&#39;,
    &#39;./input/CA_B1.mzXML&#39;,
    &#39;./input/CA_B4.mzXML&#39;,
    &#39;./input/CA_B2.mzXML&#39;,
    &#39;./input/CA_B3.mzXML&#39;,
    &#39;./input/EC_B4.mzXML&#39;,
    &#39;./input/EC_B3.mzXML&#39;,
    &#39;./input/SA_B4.mzML&#39;,
    &#39;./input/SA_B2.mzML&#39;,
    &#39;./input/SA_B1.mzML&#39;,
    &#39;./input/SA_B3.mzML&#39;
]
</pre></div>
</div>
<p>Or you can use the <code class="docutils literal notranslate"><span class="pre">Mint.load_files()</span></code> method which supports a string with regular expressions. The files in the previous function you could load with:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>mint.load_files(&#39;./input/*.*&#39;)
</pre></div>
</div>
<p>This has the advantage that you can wildcards and you can chain your commands. For examle like this:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>mint.load_files(&#39;./input/*.*&#39;).load_targets(&#39;targets.csv&#39;).run()
</pre></div>
</div>
</section>
<section id="load-target-list">
<h3>Load target list<a class="headerlink" href="#load-target-list" title="Permalink to this heading"></a></h3>
<p>Then you load the target definitions from a file the <code class="docutils literal notranslate"><span class="pre">load_targets</span></code> method is used:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>mint.load_targets(&#39;targets.csv&#39;)

mint.targets
&gt;&gt;&gt;    peak_label    mz_mean  mz_width       rt  rt_min  rt_max  rt_unit  intensity_threshold target_filename
    0    Arabitol  151.06050        10  4.92500    4.65    5.20      min                    0     targets.csv
    1    Xanthine  151.02585        10  4.37265    4.18    4.53      min                    0     targets.csv
    2   Succinate  117.01905        10  2.04390    0.87    2.50      min                    0     targets.csv
    3   Urocanate  137.03540        10  4.41500    4.30    4.60      min                    0     targets.csv
    4  Mevalonate  147.06570        10  3.00000    1.70    4.30      min                    0     targets.csv
    5  Nicotinate  122.02455        10  3.05340    2.75    3.75      min                    0     targets.csv
    6  Citrulline  174.08810        10  8.40070    8.35    8.50      min                    0     targets.csv
</pre></div>
</div>
<p>The retention time can be specified in minutes (rt_unit = ‘min’) or seconds (rt_unit = ‘s’). Mint will convert the values to SI unit seconds.</p>
<p>You can also prepare a <code class="docutils literal notranslate"><span class="pre">pandas.DataFrame</span></code> with the column names as shown above and assign it directly to the <code class="docutils literal notranslate"><span class="pre">Mint.targets</span></code> attribute:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>mint.targets = my_targets_dataframe
</pre></div>
</div>
</section>
<section id="run-data-extraction">
<h3>Run data extraction<a class="headerlink" href="#run-data-extraction" title="Permalink to this heading"></a></h3>
<p>When filenames and targets are loaded, the processing can be started by calling the <code class="docutils literal notranslate"><span class="pre">run()</span></code> method:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>mint.run()  # Use mint.run(output_fn=&#39;results&#39;) for many files to prevent memory issues.
</pre></div>
</div>
<p>Then the results will be stored in the <code class="docutils literal notranslate"><span class="pre">results</span></code> attribute:
mint.results
&gt;&gt;&gt;
…</p>
</section>
<section id="processing-a-large-number-of-files">
<h3>Processing a large number of files<a class="headerlink" href="#processing-a-large-number-of-files" title="Permalink to this heading"></a></h3>
<p>If you want to process a large number of files, you should provide an output filename. Then the results are written directly to that file instead of being stored in memory.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>mint.run(fn=&#39;my-mint-output.csv&#39;)
</pre></div>
</div>
</section>
</section>
<section id="optimize-retention-times">
<h2>Optimize retention times<a class="headerlink" href="#optimize-retention-times" title="Permalink to this heading"></a></h2>
<p>If you only have retention time (Rt) values for your targets, or if the Rt values you have are not accurate, you can use the <code class="docutils literal notranslate"><span class="pre">mint.opt.rt_min_max()</span></code> function from the ms-mint library to generate better values for the <code class="docutils literal notranslate"><span class="pre">rt_min</span></code> and <code class="docutils literal notranslate"><span class="pre">rt_max</span></code> parameters. These parameters define the range of retention times within which <code class="docutils literal notranslate"><span class="pre">ms-mint</span></code> will search for peaks corresponding to your targets. By optimizing these values, you can improve the accuracy and reliability of your results.</p>
<p>To use the <code class="docutils literal notranslate"><span class="pre">mint.opt.rt_min_max()</span></code> function, you will need to provide it with a list of retention times for your targets and the names of the mass spectrometry files containing your data. The function will then search through the data to find the optimal <code class="docutils literal notranslate"><span class="pre">rt_min</span></code> and <code class="docutils literal notranslate"><span class="pre">rt_max</span></code> values, which you can use to refine your analysis. You can then use these optimized values in conjunction with the other functions and methods of the <code class="docutils literal notranslate"><span class="pre">Mint</span></code> class to process and analyze your data.</p>
<p><img alt="" src="notebooks/peak-shapes-before-opt.png" /></p>
<p>Now, we can run the peak optimization with:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>mint.opt.rt_min_max(
    fns=[...]
    peak_labels=[&#39;Xanthine&#39;, &#39;Succinate&#39;, &#39;Citrulline&#39;],
    plot=True, rel_height=0.7, sigma=50, col_wrap=1, aspect=3,
    height=4
)
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">mint.opt.rt_min_max()</span></code> function in the ms-mint library allows you to optimize the <code class="docutils literal notranslate"><span class="pre">rt_min</span></code> and <code class="docutils literal notranslate"><span class="pre">rt_max</span></code> values for your analysis. These values define the range of retention times within which ms-mint will search for peaks corresponding to your targets. By optimizing these values, you can improve the accuracy and reliability of your results.</p>
<p>If you do not provide a list of peak_labels to the <code class="docutils literal notranslate"><span class="pre">mint.opt.rt_min_max()</span></code> function, it will run the optimization for all metabolites. Similarly, if you do not provide a list of filenames for the fn parameter, the function will use all of the files currently loaded into mint.ms_files. It is generally recommended to use a maximum of 20-40 files for the optimization process. If you have run a set of standards along with your samples (which is highly recommended), you can use the standard files to perform the optimization.</p>
<p>After running the optimization, it is a good idea to perform a manual fine-tuning of the <code class="docutils literal notranslate"><span class="pre">rt_min</span></code> and <code class="docutils literal notranslate"><span class="pre">rt_max</span></code> values, especially for complicated peaks (peaks with multiple components, noisy peaks, etc.). You can use the <code class="docutils literal notranslate"><span class="pre">mint.plot.peak_shapes()</span></code> function to visualize the peak shapes and identify any areas that may require further attention.</p>
<p><img alt="" src="notebooks/optimize-rt_min_max.png" /></p>
<p>The black lines indicates the average intensity across all files used for the optimization. The orange dotted lines show the shape of the gaussian function used to weight the mean intensities for peak selection. The orange horizontal lines indicate the peak width and the blue <code class="docutils literal notranslate"><span class="pre">x</span></code>s show the identified peak maxima. The green shaded areas show the Rt ranges which were selected by the algorithm.</p>
<p>Then we apply the changes and plot the new peak shapes:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>mint.run()
mint.plot.peak_shapes(col_wrap=3)
</pre></div>
</div>
<p><img alt="" src="notebooks/peak-shapes-after-opt.png" /></p>
<p>As you can see, the shapes of Xanthine, Succinate, Citrulline look much better.</p>
</section>
<section id="plotting-and-data-exploration">
<h2>Plotting and data exploration<a class="headerlink" href="#plotting-and-data-exploration" title="Permalink to this heading"></a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">Mint</span></code> class has a few convenient methods to visualize and explore the processed data. The results can be viewed directly in JupyterLab or stored to files using <code class="docutils literal notranslate"><span class="pre">matplotlib</span></code> and <code class="docutils literal notranslate"><span class="pre">seaborn</span></code> syntax. The figures are matplotlib objects and can be easily customised.</p>
</section>
<section id="plot-peak-shapes">
<h2>Plot peak shapes<a class="headerlink" href="#plot-peak-shapes" title="Permalink to this heading"></a></h2>
<p><img alt="" src="notebooks/peak-shapes-after-opt.png" /></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>mint.plot.peak_shapes(col_wrap = 3)
</pre></div>
</div>
<p>The method uses seaborn <a class="reference external" href="https://seaborn.pydata.org/generated/seaborn.relplot.html">sns.relplot()</a> function and keyword arguments are passed on.</p>
</section>
<section id="hierarchical-clustering">
<h2>Hierarchical clustering<a class="headerlink" href="#hierarchical-clustering" title="Permalink to this heading"></a></h2>
<p>Mint ca be used to cluster the extracted data. An agglomerative hierarchical clustering is a bottom-up clustering technique where each data point starts as its own cluster and then are merged with other clusters in a hierarchical manner based on their proximity or similarity until a single cluster is formed or a specified stopping criteria is met. The proximity is usually determined by a distance metric, such as Euclidean distance, and the similarity is usually determined by a linkage function, such as ward linkage or complete linkage. The result is a tree-like representation called a dendrogram, which can be used to determine the number of clusters and the cluster assignments of the data points.</p>
<p>Mint uses <code class="docutils literal notranslate"><span class="pre">scipy.spartial.distance</span></code> to generate the distance matrix and <code class="docutils literal notranslate"><span class="pre">scipy.cluster.hierarchy.linkage</span></code> to perform the clustering. By default a ‘cosine’ metric is used to calculate the distances. Distances between row vectors and column vectors respectively can also be done using different metrics for each set. To do so a tuple with the names of the metrics has to be provided: <code class="docutils literal notranslate"><span class="pre">mint.hierarchical_clustering(metric=(&quot;euclidean&quot;,</span> <span class="pre">&quot;cosine&quot;)</span></code>.</p>
<p>Before clustering the data can be transformed and scaled. By default <code class="docutils literal notranslate"><span class="pre">log2p1(x)</span> <span class="pre">=</span> <span class="pre">log_2(x+1)</span></code> is used to transform the data and the standard scaler (z-scores) is used to normalize the variables for each target.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>mint.plot.hierarchical_clustering(
    data=None,  # Optional, dataframe. if None, mint.crosstab(targets_var) is executed to generate the data.
    peak_labels=None,  # List of targets to include
    ms_files=None,  # List of filenames to include
    title=None,  # Title to add to the figure
    figsize=(8, 8),  # Figure size
    targets_var=&quot;peak_max&quot;,  # Data variable to plot if data is None.
    vmin=-3,  # Minimum value for color bar
    vmax=3,  # Maximum value for color bar
    xmaxticks=None,  # Maximum number of x-ticks to display
    ymaxticks=None,  # Maximum number of y-ticks to display
    transform_func=&quot;log2p1&quot;,  # Transformation to use before scaling and clustering
    scaler_ms_file=None,  # Experimental
    scaler_peak_label=&quot;standard&quot;,  # Scaler to use to normalize the data before clustering
    metric=&quot;cosine&quot;,  # Metric either a string or a 2-tuple of strings
    transform_filenames_func=&quot;basename&quot;,  # Transformation function to shorten filenames
    transposed=False,  # Transpose the plot
    top_height=2,  # Height of the top-dendrogram
    left_width=2,  # Width of the left-dendrogram
    cmap=None  # Name of a matplotlib color map
)
</pre></div>
</div>
<p><img alt="" src="notebooks/hierarchical_clustering.png" /></p>
</section>
<section id="principal-components-analysis">
<h2>Principal Components Analysis<a class="headerlink" href="#principal-components-analysis" title="Permalink to this heading"></a></h2>
<p>Principal Component Analysis (PCA) is a widely used statistical technique for dimensionality reduction. It transforms the original high-dimensional data into a new set of linearly uncorrelated variables, called Principal Components (PCs), that capture the maximum variance in the data. The first PC accounts for the largest variance in the data, the second PC for the second largest variance, and so on. PCA is commonly used for data visualization, data compression, and noise reduction. By reducing the number of dimensions in the data, PCA allows us to more easily identify patterns and relationships in the data.</p>
<p>Before clustering the data can be transformed and scaled. By default log2p1(x) = log_2(x+1) is used to transform the data and the standard scaler (z-scores) is used to normalize the variables for each target.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>mint.pca.run(n_components=5)
</pre></div>
</div>
<p>After running the PCA the results can be plotted with:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>mint.pca.plot.pairplot(n_components=5, interactive=False)
</pre></div>
</div>
<p><img alt="" src="notebooks/pca-pairplot.png" /></p>
</section>
<section id="faq">
<h2>FAQ<a class="headerlink" href="#faq" title="Permalink to this heading"></a></h2>
<section id="what-is-a-target-list">
<h3>What is a target list<a class="headerlink" href="#what-is-a-target-list" title="Permalink to this heading"></a></h3>
<p>A target list is a pandas dataframe with specific columns.</p>
<ul class="simple">
<li><p><strong>peak_label</strong>: string, Label of the peak (must be unique).</p></li>
<li><p><strong>mz_mean</strong>: numeric value, theoretical m/z value of the target ion to extract.</p></li>
<li><p><strong>mz_width</strong>: numeric value, width of the peak in [ppm]. It is used to calculate the width of the mass window  according to the formula: <code class="docutils literal notranslate"><span class="pre">Δm</span> <span class="pre">=</span> <span class="pre">m/z</span> <span class="pre">*</span> <span class="pre">1e-6</span> <span class="pre">*</span> <span class="pre">mz_width</span></code>.</p></li>
<li><p><strong>rt</strong>: numeric value, (optional), expected time of the peak. This value is not used during processing, but it can inform the peak optimization procedure.</p></li>
<li><p><strong>rt_min</strong>: numeric value, starting time for peak integration.</p></li>
<li><p><strong>rt_max</strong>: numeric value, ending time for peak integration.</p></li>
<li><p><strong>rt_unit</strong>: one of <code class="docutils literal notranslate"><span class="pre">s</span></code> or <code class="docutils literal notranslate"><span class="pre">min</span></code> for seconds or minutes respectively.</p></li>
<li><p><strong>intensity_threshold</strong>: numeric value (&gt;=0), minimum intensity value to include, serves as a noise filter. We recommend setting this to 0.</p></li>
<li><p><strong>target_filename</strong>: string (optional), name of the target list file. It is not used for processing, just to keep track of what files were used.</p></li>
</ul>
<p>The target list can be stored as csv or Excel file.</p>
</section>
<section id="what-input-files-can-be-used">
<h3>What input files can be used<a class="headerlink" href="#what-input-files-can-be-used" title="Permalink to this heading"></a></h3>
<p><code class="docutils literal notranslate"><span class="pre">ms_mint</span></code> can be used with <code class="docutils literal notranslate"><span class="pre">mzXML</span></code>, <code class="docutils literal notranslate"><span class="pre">mzML</span></code>, <code class="docutils literal notranslate"><span class="pre">mzMLb</span></code> and experimental formats in <code class="docutils literal notranslate"><span class="pre">.feather</span></code> and <code class="docutils literal notranslate"><span class="pre">.parquet</span></code> format.</p>
</section>
<section id="which-properties-does-ms-mint-extract">
<h3>Which properties does ms-mint extract<a class="headerlink" href="#which-properties-does-ms-mint-extract" title="Permalink to this heading"></a></h3>
<section id="parameters-from-target-list">
<h4>Parameters from target list<a class="headerlink" href="#parameters-from-target-list" title="Permalink to this heading"></a></h4>
<ul class="simple">
<li><p><strong>ms_file</strong>: Filename of MS-file</p></li>
<li><p><strong>peak_label</strong>: From target list</p></li>
<li><p><strong>mz_mean</strong>: From target list</p></li>
<li><p><strong>mz_width</strong>: From target list</p></li>
<li><p><strong>rt</strong>: From target list</p></li>
<li><p><strong>rt_min</strong>: From target list</p></li>
<li><p><strong>rt_max</strong>: From target list</p></li>
<li><p><strong>rt_unit</strong>: Unit of retention times, default is s (seconds), from [s, min]</p></li>
<li><p><strong>intensity_threshold</strong>: From target list</p></li>
<li><p><strong>target_filename</strong>: From target list</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="results-columns">
<h4>Results columns<a class="headerlink" href="#results-columns" title="Permalink to this heading"></a></h4>
<ul class="simple">
<li><p><strong>peak_area</strong>: The sum of all intensities in the extraction window</p></li>
<li><p><strong>peak_area_top3</strong>: The average of the 3 largest intensities in the extraction window</p></li>
<li><p><strong>peak_n_datapoints</strong>: Number of datapoints</p></li>
<li><p><strong>peak_max</strong>: Intensity of peak maximum</p></li>
<li><p><strong>peak_rt_of_max</strong>: Retentiontime of peak maximum</p></li>
<li><p><strong>peak_min</strong>: Minimum peak intensity (offset)</p></li>
<li><p><strong>peak_median</strong>: Median of all intensities</p></li>
<li><p><strong>peak_mean</strong>: Average of all intensities</p></li>
<li><p><strong>peak_delta_int</strong>: Difference between first and last intensity</p></li>
<li><p><strong>peak_shape_rt</strong>: Array of retention times</p></li>
<li><p><strong>peak_shape_int</strong>: Array of projected intensities</p></li>
<li><p><strong>peak_mass_diff_25pc</strong>: 25th percentile between <em>mz_mean</em> minus m/z values of all datapoints</p></li>
<li><p><strong>peak_mass_diff_50pc</strong>: Median between <em>mz_mean</em> minus m/z values of all datapoints</p></li>
<li><p><strong>peak_mass_diff_75pc</strong>: 75th percentile between <em>mz_mean</em> minus m/z values of all datapoints</p></li>
<li><p><strong>peak_score</strong>: Score of peak quality (experimental)</p></li>
<li><p><strong>total_intensity</strong>: Sum of all intensities in the file</p></li>
<li><p><strong>ms_path</strong>: Path of the MS-file</p></li>
<li><p><strong>ms_file_size</strong>: Size of the MS-file in MB</p></li>
</ul>
</section>
</section>
</section>
<hr class="docutils" />
<section id="release-notes">
<h2>Release Notes<a class="headerlink" href="#release-notes" title="Permalink to this heading"></a></h2>
<section id="milestones">
<h3>0.2.0 Milestones<a class="headerlink" href="#milestones" title="Permalink to this heading"></a></h3>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>- peak_area_top3 comparable to El-Maven PeakAreaTop values
</pre></div>
</div>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="index.html" class="btn btn-neutral float-left" title="Welcome to ms-mint’s documentation!" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="modules.html" class="btn btn-neutral float-right" title="ms_mint" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, Soren Wacker.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>
   
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-KZQBC4NMD2"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-9RJ7Z0BG5W');
  </script>


</body>
</html>